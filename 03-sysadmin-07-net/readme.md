# Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?
Linux:  
ip a, ifconfig, ip link show, nmcli device status, nmcli connection show, netstat -i, ip addr list  
Windows:  
ipconfig /all, Get-NetIPConfiguration

# Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?
Для поиска соседей используется протокол LLDP, для его работы в необходим пакет lldpd  
Примеры команд:  
vagrant@vagrant:~$ sudo lldpcli show neighbors  
-------------------------------------------------------------------------------  
LLDP neighbors:  
-------------------------------------------------------------------------------  

# Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.
Для разделения L2 коммутатора на несколько сетей используются технология VLAN (Виртуальная локальная сеть). Существует разные типы VLAN (802.1Q, Port based VLAN и т.д.)  
Пакет в linux: vlan, команды:  
sudo ip link add link eth0 name enp1s0.8 type vlan id 8  
Команда создёт на интерфейсе eth0 новый VLAN с именем enp1s0.8 и идентификатором 8  
vagrant@vagrant:~$ ip -d link show enp1s0.8  
3: enp1s0.8@eth0: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000  
    link/ether 08:00:27:73:60:cf brd ff:ff:ff:ff:ff:ff promiscuity 0 minmtu 0 maxmtu 65535  
    vlan protocol 802.1Q id 8 <REORDER_HDR> addrgenmode eui64 numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535  
Пример конфигурации (netplan):  
vlans:  
  vlan50:  
    id: 50  
    link: eth0  
    dhcp4: no  
    addresses: [192.168.1.2/24]  
    gateway: 192.168.1.1  
    routes:  
        - to: 192.168.1.2/24  
         via: 192.168.1.1  
         on-link: true  
vlans: — объявляем блок настройки vlan.  
vlan10: — произвольное имя vlan интерфейса.  
id: — тег нашего vlan.  
link: — интерфейс через который vlan будет доступен.  
routes: — объявляем блок описания маршрутов.  
— to: — задаем адрес/подсеть до которой необходим маршрут.  
via: — указываем шлюз через которой будет доступна наша подсеть.  
on-link: — указываем что прописывать маршруты всегда при поднятии линка.  
# Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.
Агрегация сетевых интерфейсов в linux осуществляется двумя типами: горячий резерв и балансировка нагрузки. При работе сетевых интерфейсов в режиме горячего резерва интерфейсы разделяются на основной и резервный. Весь трафик, по умолчанию, направляется через основной интерфейс, запасной включается только в том случае, когда трафик не может быть направлен через основной (например не подключён сетевой кабель в основной интерфейс). В режиме "балансировка нагрузки" напрмвление трафика устанавливается в зависимости от уровня приоритета, назначеноого каждому интерфейсу. Можно реализовать режим работы с одновременной работой двух интерфейсов.  
network:  
    renderer: networkd  
    version: 2  
    ethernets:  
        eth0:  
          dhcp4: no  
        eth1:  
          dhcp4: no  
    bonds:  
      bond0:  
        dhcp4: no  
        interfaces: [eth0, eth1]  
        parameters:  
          mode: 802.3ad  
          mii-monitor-interval: 1  
bonds: — блок поясняющий что мы будем настраивать bonding   
bond0: — произвольное имя интерфейса  
interfaces: — набор интерфейсов собираемых в bonding  
parameters: — блок настройки параметров  
mode: — режим работы bonding.  
mii-monitor-interval: — интервал мониторинга 1 сек.  
# Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.
С маской /29 может быть 8 адресов (6 хостов + широковещательный адрес + адрес сети)  
Из сети /24 можно получить 32 подсети /29  
Network:   192.168.0.240/29      11000000.10101000.00000000.11110 000 (Class C)  
Broadcast: 192.168.0.247         11000000.10101000.00000000.11110 111  
HostMin:   192.168.0.241         11000000.10101000.00000000.11110 001  
HostMax:   192.168.0.246         11000000.10101000.00000000.11110 110  
Hosts/Net: 6                     (Private Internet)  

Network:   192.168.0.248/29      11000000.10101000.00000000.11111 000 (Class C)  
Broadcast: 192.168.0.255         11000000.10101000.00000000.11111 111  
HostMin:   192.168.0.249         11000000.10101000.00000000.11111 001  
HostMax:   192.168.0.254         11000000.10101000.00000000.11111 110  
Hosts/Net: 6                     (Private Internet) 
# Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.
Для такого случая можно взять адреса из диапазона Carrier-grade NAT.  
100.64.0.0 — 100.127.255.255 (маска подсети: 255.192.0.0 или /10)  
vagrant@vagrant:~$ ipcalc -b 100.64.0.0 -s 40  
Address:   100.64.0.0  
Netmask:   255.255.255.0 = 24  
Wildcard:  0.0.0.255  
=>  
Network:   100.64.0.0/24  
HostMin:   100.64.0.1  
HostMax:   100.64.0.254  
Broadcast: 100.64.0.255  
Hosts/Net: 254                   Class A  

1. Requested size: 40 hosts  
Netmask:   255.255.255.192 = 26  
Network:   100.64.0.0/26  
HostMin:   100.64.0.1  
HostMax:   100.64.0.62  
Broadcast: 100.64.0.63  
Hosts/Net: 62                    Class A  

Needed size:  64 addresses.  
Used network: 100.64.0.0/26  
Unused:  
100.64.0.64/26  
100.64.0.128/25   
# Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?
linux: arp -a  
windows arp -a  
Очистить кеш arp  
linux: ip -s -s neigh flush all  
windows: netsh interface ip delete arpcache  
Удалить из arp таблицы один ip адрес:  
linux: arp -d 192.168.100.25  
windows: arp -d 192.168.100.25  

